var PrngPickerView=Backbone.View.extend({events:{"click .runTestBtn":"handleButtonClick","click .resetTestBtn":"handleResetClick","change :radio":"handleRadioChange"},initialize:function(options){this.options=$.extend({},this.defaults,options||{});lockifyUtils.setupQtips('.icon-refresh');if(lockifyUtils.isMobile){$('#prngSupportMsg').text(' (first method not availabe on mobile site)');$('#prngType-sjcl').prop('disabled',true);$('#prngType-sjcl').parent().addClass('disabled');$('#prngType-native').prop('checked',true);$('.runTestBtn').prop('disabled',false).removeClass('disabled');}
else{if(true||lockifyCryptoUtils.nativeCryptoAvailable()){$('#prngSupportMsg').text(' (your browser supports both)');}else{$('#prngSupportMsg').text(' (your browser only supports the first)');$('#prngType-native').prop('disabled',true);$('#prngType-native').parent().addClass('disabled');$('#prngType-sjcl').prop('checked',true);$('.runTestBtn').prop('disabled',false).removeClass('disabled');$('#entropyEncryptContainer').removeClass('defaultHide');}
this.entropyMeter=new EntropyMeterView({el:$('#entropyEncryptContainer')});this.entropyMeter.handleResetEntropyClick();_.bindAll(this,'handleEntropyReset');$(document).bind('entropyReset',this.handleEntropyReset);}},handleEntropyReset:function(){$('.runTestBtn').prop('disabled',true).addClass('disabled');Random.removeEventListener('seeded',this.handleEntropySeeded);Random.addEventListener('seeded',this.handleEntropySeeded);},handleEntropySeeded:function(){$('.runTestBtn').prop('disabled',false).removeClass('disabled');},handleButtonClick:function(){if($('html').hasClass('cssanimations')){$(".spinMe").remove();}else{$(".spinMe").spinnerFont().show();$('.spinkitSpinner').remove();}
$('#prngTests').removeClass('defaultHide');$('#prngComplete').addClass('defaultHide');$('#prngRunning').removeClass('defaultHide');$('#prngPicker').addClass('defaultHide');$('#prngTests').removeClass('testComplete');if($('#prngType-native').is(':checked')){$('.runningTestName').text("Browser's Native PRNG");}else{$('.runningTestName').text("JS Implementation of Fortuna");}
$(document).trigger('startTest',[this.forceNonNative()]);},handleRadioChange:function(){if($('#prngType-sjcl').is(':checked')){$('#entropyEncryptContainer').removeClass('defaultHide');this.entropyMeter.handleResetEntropyClick();$('.runTestBtn').prop('disabled',true).addClass('disabled');}else{$('#entropyEncryptContainer').addClass('defaultHide');$('.runTestBtn').prop('disabled',false).removeClass('disabled');}},forceNonNative:function(){return $('#prngType-sjcl').prop('checked');},handleResetClick:function(){$('#prngComplete').addClass('defaultHide');$('#prngPicker').removeClass('defaultHide');$('input:radio:checked').prop('checked',false);$('#entropyEncryptContainer:visible').addClass('defaultHide');this.entropyMeter.handleResetEntropyClick();$(document).trigger('resetTest');}});