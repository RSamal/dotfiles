var UniqueBadgeView=Backbone.View.extend({defaults:{autoLaunchDialog:false},events:{"click #lockifymeBadgeCode":"handleBadgeDialogOpen"},initialize:function(options){this.options=$.extend({},this.defaults,options||{});domain=window.location.protocol+'//'+window.location.host;curPage=domain+"/"+lockifyGlobals.UNIQUEURL_SUBPATH+"/"+this.model.id;genMeLtEmbedCode='<a href="'+curPage+'" target="_blank"><div style="background: transparent 0px 0px/130px 65px no-repeat url('+domain+'/site_media/images/lockifyme_ltbadge.png); height: 65px; width: 130px; display:inline-block;"></div></a>';genMeDkEmbedCode='<a href="'+curPage+'" target="_blank"><div style="background: transparent 0px 0px/130px 65px no-repeat url('+domain+'/site_media/images/lockifyme_dkbadge.png); height: 65px; width: 130px; display:inline-block;"></div></a>';genUsLtEmbedCode='<a href="'+curPage+'" target="_blank"><div style="background: transparent 0px 0px/130px 65px no-repeat url('+domain+'/site_media/images/lockifyus_ltbadge.png); height: 65px; width: 130px; display:inline-block;"></div></a>';genUsDkEmbedCode='<a href="'+curPage+'" target="_blank"><div style="background: transparent 0px 0px/130px 65px no-repeat url('+domain+'/site_media/images/lockifyus_dkbadge.png); height: 65px; width: 130px; display:inline-block;"></div></a>';this.badgeTextDropDown=$('#badgeTextSelect').imageDropdown({'selectList':$("#badgeTextSelect_options"),'highlightClass':'li-hover'});_.bindAll(this,['handleBadgeChange']);this.badgeTextDropDown.bind('change',this.handleBadgeChange);this.badgeColorDropDown=$('#badgeColorSelect').imageDropdown({'selectList':$("#badgeColorSelect_options"),'highlightClass':'li-hover'});_.bindAll(this,['handleBadgeChange']);this.badgeColorDropDown.bind('change',this.handleBadgeChange);this.handleBadgeChange();$('#lockifymeBadgeDialog').on('keyup','textarea',function(){$(this).height(0);$(this).height(this.scrollHeight);});},handleCodeSelect:function(){var $this=$('#embedCode');$this.select();window.setTimeout(function(){$this.select();},1);function mouseUpHandler(){$this.off("mouseup",mouseUpHandler);return false;}
$this.mouseup(mouseUpHandler);},handleBadgeDialogOpen:function(){$("#lockifymeBadgeDialog").dialog(dialogOptions);if(window.location.hash===''){window.location.hash=UniqueBadgeView.dialogHash;}
$("#lockifymeBadgeDialog").on('dialogclose',function(event,ui){if(window.location.hash==UniqueBadgeView.dialogHash){window.location.hash='';}});this.handleCodeSelect();},handleBadgeChange:function(event){var selectMeLt=function(){$('#badgeExample').removeClass().addClass('lockifymeLt');$('.ownerBadge span').removeClass().addClass('lockifymeLt');$("#embedCode").text(genMeLtEmbedCode);};var selectMeDk=function(){$('#badgeExample').removeClass().addClass('lockifymeDk');$('.ownerBadge span').removeClass().addClass('lockifymeDk');$("#embedCode").text(genMeDkEmbedCode);};var selectUsLt=function(){$('#badgeExample').removeClass().addClass('lockifyusLt');$('.ownerBadge span').removeClass().addClass('lockifyusLt');$("#embedCode").text(genUsLtEmbedCode);};var selectUsDk=function(){$('#badgeExample').removeClass().addClass('lockifyusDk');$('.ownerBadge span').removeClass().addClass('lockifyusDk');$("#embedCode").text(genUsDkEmbedCode);};switch(this.badgeTextDropDown.val()){case'text-lockifyme':switch(this.badgeColorDropDown.val()){case'color-light':selectMeLt();break;case'color-dark':selectMeDk();break;}
break;case'text-lockifyus':switch(this.badgeColorDropDown.val()){case'color-light':selectUsLt();break;case'color-dark':selectUsDk();break;}
break;}
this.handleCodeSelect();}});UniqueBadgeView.dialogHash='#config';