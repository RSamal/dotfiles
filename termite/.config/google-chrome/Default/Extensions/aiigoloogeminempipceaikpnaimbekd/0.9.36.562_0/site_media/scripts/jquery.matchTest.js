/*
 * jQuery Match Test Plugin
 * Copyright 2010 Lockify Inc. All Rights Reserved.
*/
(function(jQuery){jQuery.fn.matchTest=function(options){var defaults={mainInputControl:undefined,mainValueControl:undefined,compareInputControl:undefined,compareValueControl:undefined,nonMatchString:'Passwords do not match',partialMatchString:'Passwords match so far...',totalMatchString:'Passwords match',msgAfterSelector:null};var settings=$.extend(defaults,{mainInputControl:$(this),mainValueControl:$(this)});settings=$.extend(settings,options);if(settings.compareValueControl===undefined){settings.compareValueControl=settings.compareInputControl;}
return this.each(function(){var msgAfter;if(settings.msgAfterSelector!=null){msgAfter=$(settings.msgAfterSelector);}else{msgAfter=settings.mainInputControl;}
if(msgAfter.next('.passwordMatch').length===0){msgAfter.after('<span class="passwordMatch"><span id="noMatchMessage" class="passwordNote nomatch defaultHide"><span class="icomoon-icon icon-cancel-2">&nbsp;</span>&nbsp;'+settings.nonMatchString+'</span><span id="partialMatchMessage" class="passwordNote partmatch defaultHide"><span class="icomoon-icon icon-checkmark">&nbsp;</span>&nbsp;'+settings.partialMatchString+'</span><span id="totalMatchMessage" class="passwordNote nonerror defaultHide"><span class="icomoon-icon icon-checkmark">&nbsp;</span>&nbsp;'+settings.totalMatchString+'</span></span>');}
settings=$.extend(settings,{noMatchControl:msgAfter.next('.passwordMatch').children("#noMatchMessage:first"),partialMatchControl:msgAfter.next('.passwordMatch').children("#partialMatchMessage:first"),totalMatchControl:msgAfter.next('.passwordMatch').children("#totalMatchMessage:first")});var handler=function(event,control){if(event.keyCode==9||event.keyCode==16){return true;}
if(settings.mainInputControl.val().length===0||settings.compareInputControl.val().length===0){$(".passwordNote").hide();settings.mainInputControl.removeClass('validationError');settings.compareInputControl.removeClass('validationError');return;}
var superStr,subStr;if(control.attr('id')==settings.mainInputControl.attr('id')){superStr=settings.compareValueControl.val();subStr=settings.mainValueControl.val();}else{superStr=settings.mainValueControl.val();subStr=settings.compareValueControl.val();}
if(superStr.indexOf(subStr)!==0){settings.noMatchControl.show().siblings(".nomatch,.nonerror,.partmatch").hide();}else{if(settings.compareValueControl.val().length==settings.mainValueControl.val().length){settings.totalMatchControl.show().siblings(".nomatch,.nonerror,.partmatch").hide();settings.mainInputControl.removeClass('validationError');settings.compareInputControl.removeClass('validationError');}
else{settings.partialMatchControl.show().siblings(".nomatch,.nonerror,.partmatch").hide();}}};settings.mainInputControl.keyup(function(event){handler(event,$(this));});if(settings.compareInputControl!==undefined){settings.compareInputControl.keyup(function(event){handler(event,$(this));});}});};})(jQuery);