var AuthEmailView=BaseEncryptInputView.extend({defaults:{MAX_EMAIL_ADDRESSES:1},events:{"change #emailUsers":"handleChange","focus #emailUsers":"handleFocus","blur #emailUsers":"handleBlur","keydown #emailUsers":"handleKeydown"},initialize:function(options){this.options=$.extend({},this.defaults,options);this.MAX_EMAIL_ADDRESSES=$(this.el).data('maxIds');_.bindAll(this,['reset']);$(document).bind('formReset',this.reset);this.model.bind("validationError",this.handleValidationError);},handleChange:function(){this.model.set({'max_userIds':this.MAX_EMAIL_ADDRESSES});var userids=[];if($('#emailUsers').val().length){var alluserids=$.trim($('#emailUsers').val()).split(/[\t\n\r ,]+/g);$.each(alluserids,function(i,val){if(val!==''){userids.push(val);}});this.model.set({'userids':userids});}},handleFocus:function(){$('#EmailCaseMsg').css("display","block");},handleBlur:function(){},handleKeydown:function(event){if($('#emailUsers').val().split(',').length>=this.options.MAX_EMAIl_ADDRESSES&&event.keyCode==188){return false;}
return true;},reset:function(){$('#emailUsers').val('').blur();},handleValidationError:function(type,msg){if(type==="email"){AuthEmailView.__super__.appendError($('#authOptionEmail_errors'),msg,$('#emailUsers'));}}});