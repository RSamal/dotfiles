var MessageBoxView=Backbone.View.extend({defaults:{preventCopy:false},events:{},initialize:function(options){this.options=$.extend({},this.defaults,options||{});this.createOutputBox();},createOutputBox:function(){var DATA_INPUT_REVEAL_MSG="Press to reveal message";$('#decryptedMessage').append($('#dataShow').remove());if(this.options.preventCopy){lockifyUtils.setupQtips('#dataShow',null,null,'');$("#dataShow").addClass("data-focus-nocopy");var handleDoubleAndTripleClick=function(){if(document.createRange){window.getSelection().removeAllRanges();}
else if(document.selection){document.selection.empty();}};$("#dataShow").dblclick(function(){$(this).one('click',handleDoubleAndTripleClick);handleDoubleAndTripleClick();});$("#dataShow").bind("contextmenu",function(e){return false;});var wasDragged=false;$("#dataShow").mousedown(function(){$("#dataShow").mousemove(function(event){event.cancelBubble=true;wasDragged=true;});$(this).focus();return false;});$('#dataShow').bind('keydown, keyup, keypress','ctrl+c',function(event){event.returnValue=false;return false;});$("body").mouseup(function(){$("#dataShow").unbind('mousemove');if(wasDragged){if(document.createRange){window.getSelection().removeAllRanges();}
else if(document.selection){document.selection.empty();}
wasDragged=false;return false;}});}else{$('#dataShow').attr('title','');}
var handleMessageReveal=function(){$("#dataShow").removeClass('data-blur').addClass('data-focus').data('message','visible');$("#decryptDataOverlayText").addClass('hiddenOverlay');$('#dataBottomBar').removeClass('data-hover');};$(document).click(function(){if($('#dataShow').data('message')=='visible'){$('#dataShow').addClass('data-blur').removeClass('data-focus').data('message','hidden');$('#decryptDataOverlayText').removeClass('hiddenOverlay');}});$('#decryptedMessage').click(function(e){handleMessageReveal();e.stopPropagation();});$('#decryptDataOverlayText').text(DATA_INPUT_REVEAL_MSG);}});