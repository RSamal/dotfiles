var ShortLinkOptionView=Backbone.View.extend({defaults:{},events:{"change input":"handleCheckboxChange","click #shortLinkDefault":"handleDefaultClick"},initialize:function(options){this.options=$.extend({},this.defaults,options||{});$(document).bind('formBoundToUserPrefs',this.updateElements);_.bindAll(this,['handleCheckboxChange']);},handleCheckboxChange:function(){var bitStrength=this.$('input').is(':checked')?128:256;this.model.set('bitStrength',bitStrength);if(typeof document.lockifyUserEntryDefaults!='undefined'){var defaultBitStrength=document.lockifyUserEntryDefaults.get('bit_strength');if(defaultBitStrength==256&&$('#shortLinkCheckbox').is(':checked')||defaultBitStrength==128&&!($('#shortLinkCheckbox').is(':checked')))
{lockifyUtils.cssFadeIn('#shortLinkDefault');}else{lockifyUtils.cssFadeOut('#shortLinkDefault');}}else{lockifyUtils.cssFadeOut('#shortLinkDefault');}
$('.console_bitStrength').text(bitStrength);},updateElements:function(){$('#shortLinkCheckbox').change();},handleDefaultClick:function(event){var defaults=document.lockifyUserEntryDefaults;defaults.set('bit_strength',$('#shortLinkCheckbox').is(':checked')?128:256);defaults.save(_.pick(defaults.attributes,'bit_strength'),{patch:true,success:function(){lockifyUtils.cssFadeOut('#shortLinkDefault');lockifyUtils.displayUpdateResultDialog(lockifyGlobals.defaultSavedMsg);},error:function(){lockifyUtils.displayUpdateResultDialog('Something went wrong. Please try again.');}});}});